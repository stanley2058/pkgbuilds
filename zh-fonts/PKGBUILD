# Maintainer: Stanley Wang <stanley@stw.tw>

pkgname=zh-fonts
pkgver=1.0.10
pkgrel=1
pkgdesc='A collection of Chinese (traditional) fonts'
arch=(any)
url='https://github.com/ButTaiwan'
license=(OFL)
source=(
    "genyo-1.0.10.zip::https://github.com/ButTaiwan/genyo-font/releases/download/vnull/GenKiMin2-ttc.zip"
    "genwan-1.0.10.zip::https://github.com/ButTaiwan/genwan-font/releases/download/vnull/GenWanMin2-ttc.zip"
    "genseki-1.0.10.zip::https://github.com/ButTaiwan/genseki-font/releases/download/vnull/GenSekiGothic2-ttc.zip"
    "gensen-1.0.10.zip::https://github.com/ButTaiwan/gensen-font/releases/download/vnull/GenSenRounded2-ttc.zip"
    "genyog-1.0.10.zip::https://github.com/ButTaiwan/genyog-font/releases/download/vnull/GenKiGothic2-ttc.zip"
)
noextract=("${source[@]%%::*}")
sha256sums=(
    "0019dfc4b32d63c1392aa264aed2253c1e0c2fb09216f8e2cc269bbfb8bb49b5"
    "0019dfc4b32d63c1392aa264aed2253c1e0c2fb09216f8e2cc269bbfb8bb49b5"
    "0019dfc4b32d63c1392aa264aed2253c1e0c2fb09216f8e2cc269bbfb8bb49b5"
    "0019dfc4b32d63c1392aa264aed2253c1e0c2fb09216f8e2cc269bbfb8bb49b5"
    "0019dfc4b32d63c1392aa264aed2253c1e0c2fb09216f8e2cc269bbfb8bb49b5"
)

_fonts=('genyo' 'genwan' 'genseki' 'gensen' 'genyog')

prepare() {
    for ((i = 0; i < ${#_fonts[@]}; i++)); do
        id=${_fonts[$i]}
        dir_name=$(echo "${source[$i]}" | sed -r 's/\.zip::.*//')
        mkdir -p "$srcdir/$dir_name"
        bsdtar -xf "$dir_name.zip" -C "$srcdir/$dir_name"
    done
}

package() {
    for ((i = 0; i < ${#_fonts[@]}; i++)); do
        id=${_fonts[$i]}
        dir_name=$(echo "${source[$i]}" | sed -r 's/\.zip::.*//')
        cd "$srcdir/$dir_name"
        install -Dm644 -t "$pkgdir/usr/share/fonts/TTF/$id-ttf/" ./*.ttc
        install -Dm644 SIL_Open_Font_License_1.1.txt "$pkgdir/usr/share/licenses/$id-ttf/LICENSE"
    done
}
